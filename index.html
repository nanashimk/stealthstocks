<script type="text/babel">
  // --- Contenus très simples ---
  function Home() {
    return (
      <>
        <h1 style={{textAlign:"center"}}>Accueil</h1>
        <p style={{maxWidth:700,margin:"16px auto"}}>
          Bienvenue sur <b>StealthStocks</b>. Ici tu peux mettre un texte d’intro,
          une image, ou une liste d’actions.
        </p>
      </>
    );
  }

  function About() {
    return (
      <>
        <h1 style={{textAlign:"center"}}>À propos</h1>
        <p style={{maxWidth:700,margin:"16px auto"}}>
          Petite description du site, de ce que tu veux suivre, etc.
        </p>
      </>
    );
  }

  function Cart() {
    return (
      <>
        <h1 style={{textAlign:"center"}}>Panier</h1>
        <p style={{maxWidth:700,margin:"16px auto"}}>
          Ici tu pourras lister des éléments sélectionnés (ex : tickers) plus tard.
        </p>
      </>
    );
  }

  function Checkout() {
    return (
      <>
        <h1 style={{textAlign:"center"}}>Paiement</h1>
        <p style={{maxWidth:700,margin:"16px auto"}}>
          Zone de confirmation (démo pour l’instant).
        </p>
      </>
    );
  }

  const PAGES = { home: Home, about: About, cart: Cart, checkout: Checkout };

  // --- Router basé sur le hash ---
  function useHashRoute() {
    const getRoute = () => window.location.hash.slice(1) || "home";
    const [hash, setHash] = React.useState(getRoute);
    React.useEffect(() => {
      // Si pas de hash, on force #home pour l’URL propre
      if (!window.location.hash) window.location.hash = "#home";
      const onHashChange = () => setHash(getRoute());
      window.addEventListener("hashchange", onHashChange);
      return () => window.removeEventListener("hashchange", onHashChange);
    }, []);
    return hash;
  }

  function App() {
    const route = useHashRoute();
    const Page = PAGES[route] || Home;

    const NavButton = ({to, label}) => (
      <a href={`#${to}`} className={`btn ${route === to ? "active" : ""}`}>{label}</a>
    );

    return (
      <>
        <main style={{maxWidth:"900px",margin:"0 auto",padding:"24px 16px 100px"}}>
          <Page />
        </main>
        <nav className="nav">
          <NavButton to="home" label="Home" />
          <NavButton to="about" label="About" />
          <NavButton to="cart" label="Cart" />
          <NavButton to="checkout" label="Checkout" />
        </nav>
      </>
    );
  }

  const root = ReactDOM.createRoot(document.getElementById("root"));
  root.render(<App />);
</script>
