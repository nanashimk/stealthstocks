<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Legit Flow — Panier</title>
<style>
:root{ --bg:#ffffff; --text:#101418; --muted:#6b7280; --radius:18px; --accent:#111; }
*{ box-sizing:border-box; } body{ margin:0; font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial; color:var(--text); background:var(--bg); }
.container{ width:min(1100px, 95vw); margin:0 auto; padding: 20px 0; }
header{ position:sticky; top:0; z-index:30; backdrop-filter:saturate(120%) blur(8px); background:rgba(255,255,255,.85); border-bottom:1px solid #eee; }
.nav{ display:flex; align-items:center; justify-content:space-between; padding:14px 0; }
.brand{ display:inline-flex; align-items:center; gap:.7rem; font-weight:700; letter-spacing:.2px; }
.dot{ width:30px; height:30px; border-radius:50%; background: radial-gradient(circle at 30% 30%, #79f, #5af); box-shadow: 0 8px 22px rgba(60,100,255,.25); }
.actions{ display:flex; gap:8px; align-items:center; }
.btn, .cta{ border:1px solid var(--accent); color:var(--accent); background:#fff; border-radius:999px; padding:10px 14px; text-decoration:none; display:inline-flex; align-items:center; gap:.5rem; }
h1{ font-size:clamp(1.5rem, 2vw + 1rem, 2.2rem); margin:10px 0 8px; font-weight:800; }
.table{ width:100%; border-collapse:collapse; margin-top:16px; }
.table th, .table td{ padding:12px; border-bottom:1px solid #eee; text-align:left; }
.qty{ display:inline-flex; border:1px solid #111; border-radius:999px; overflow:hidden; }
.qty button{ border:0; background:#fff; padding:6px 10px; cursor:pointer; }
.qty span{ min-width:28px; text-align:center; display:inline-block; }
.right{ text-align:right; }
.total{ font-weight:700; font-size:1.1rem; }
.empty{ color:#6b7280; margin: 26px 0; }
</style>
</head>
<body>
<header>
  <div class="container nav">
    <div class="brand"><div class="dot"></div><span>Legit Flow</span></div>
    <div class="actions">
      <a class="btn" href="index.html">Vitrine</a>
      <a class="cta" href="paiement.html">Paiement</a>
    </div>
  </div>
</header>

<div class="container">
  <h1>Votre panier</h1>
  <div id="empty" class="empty" style="display:none">Votre panier est vide.</div>
  <table class="table" id="cartTable" style="display:none">
    <thead>
      <tr><th>Produit</th><th>Prix</th><th>Qté</th><th class="right">Sous-total</th></tr>
    </thead>
    <tbody id="rows"></tbody>
    <tfoot>
      <tr><td colspan="3" class="right total">Total</td><td class="right total" id="total">0€</td></tr>
    </tfoot>
  </table>
</div>

<script>
function getCart(){ return JSON.parse(localStorage.getItem('cart') || '{}'); }
function setCart(c){ localStorage.setItem('cart', JSON.stringify(c)); render(); }

const rows = document.getElementById('rows');
const totalEl = document.getElementById('total');
const tbl = document.getElementById('cartTable');
const empty = document.getElementById('empty');

function render(){
  const c = getCart();
  const items = Object.values(c);
  if(items.length === 0){
    tbl.style.display = 'none'; empty.style.display = 'block'; return;
  }
  empty.style.display = 'none'; tbl.style.display = 'table';
  rows.innerHTML = '';
  let total = 0;
  items.forEach(it => {
    const tr = document.createElement('tr');
    const sub = it.price * it.qty;
    total += sub;
    tr.innerHTML = `
      <td><img src="${it.img}" alt="" style="width:46px;height:46px;object-fit:contain;vertical-align:middle;margin-right:8px;border:1px solid #eee;border-radius:8px;background:#fff" /> ${it.title}</td>
      <td>${it.price}€</td>
      <td>
        <div class="qty">
          <button data-id="${it.id}" data-delta="-1">–</button>
          <span>${it.qty}</span>
          <button data-id="${it.id}" data-delta="1">+</button>
        </div>
      </td>
      <td class="right">${sub}€</td>
    `;
    rows.appendChild(tr);
  });
  totalEl.textContent = total + '€';
}

rows.addEventListener('click', (e) => {
  const btn = e.target.closest('button[data-delta]');
  if(!btn) return;
  const id = btn.dataset.id;
  const delta = parseInt(btn.dataset.delta, 10);
  const c = getCart();
  if(!c[id]) return;
  c[id].qty += delta;
  if(c[id].qty <= 0){ delete c[id]; }
  setCart(c);
});

render();
</script>
</body>
</html>
